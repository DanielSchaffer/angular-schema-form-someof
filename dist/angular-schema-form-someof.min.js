!function(e,o){"function"==typeof define&&define.amd?define(["lodash","angular-schema-form","angular-schema-form-bootstrap"],o):"object"==typeof exports?module.exports=o(require("lodash"),require("angular-schema-form"),require("angular-schema-form-bootstrap")):e.schemaFormSomeOf=o(e._,e.angularSchemaForm,e.schemaFormBootstrap)}(this,function(e,o,r){angular.module("schemaForm").run(["$templateCache",function(e){e.put("decorators/bootstrap/someof-selector.html",'<div ng-class="{\'has-error\': form.disableErrorState !== true &amp;&amp; hasError(), \'has-success\': form.disableSuccessState !== true &amp;&amp; hasSuccess(), \'has-feedback\': form.feedback !== false}" class="form-group {{form.htmlClass}} schema-form-select"><label ng-show="showTitle()" class="control-label {{form.labelHtmlClass}}">{{form.title}}</label><select name="{{form.key.slice(-1)[0]}}" ng-model="form.selector.current" ng-disabled="form.readonly" sf-some-of-selector="sf-some-of-selector" ng-options="item.value as item.name group by item.group for item in form.titleMap" class="form-control {{form.fieldHtmlClass}}"></select><div sf-message="form.description" class="help-block"></div></div>'),e.put("decorators/bootstrap/someof.html",'<fieldset ng-disabled="form.readonly" sf-some-of="$$value$$" sf-field-model="sf-some-of" class="schema-form-fieldset {{form.htmlClass}} schema-form-someof"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div ng-show="form.description" ng-bind-html="form.description" class="help-block"></div></fieldset>')}]);var t;return angular.module("schemaForm").config(["schemaFormDecoratorsProvider","schemaFormProvider","sfBuilderProvider","sfPathProvider",function(o,r,t,s){function l(o,t,s){var l=r.defaultFormDefinition(o,e.extend({},t,{type:"object"}),s);return l.type="someof-fieldset",l.key=s.path.slice(),l}function a(o,t,l){if(!t[t.type]||!i[t.type])return null;var a=l.path.slice();a.push("selected");var n=r.stdFormObj(o,t,l);return n.key=a,n.type=i[t.type]+"-selector",n.titleMap=e.chain(t[t.type]).map(function(e){return[e.title||e.name,e.title||e.name]}).object().value(),n.selector=n,n.forms=[],l.lookup[s.stringify(a)]=n,n}function n(o,t,s){var l=e.first(e.intersection(e.keys(i),e.keys(t)));if(!l)return null;var a=r.defaultFormDefinition(o,e.extend(e.omit(t,l),{type:"someOfFieldset"}),s);if(!a)return null;var n=r.defaultFormDefinition(l,e.extend(e.pick(t,l,"title","name"),{type:l}),s);return n?(a.selector=n,a.items.push(n),angular.forEach(t[l],function(e){var o=r.defaultFormDefinition(e.title||e.name,angular.extend(e,{type:"object"}),s);o&&(o.selector=n,o.condition="form.selector.current === '"+(e.title||e.name)+"'",a.items.push(o),n.forms.push(o))}),a):null}var i={oneOf:"oneof",anyOf:"anyof",allOf:"allof"},f=t.builders.simpleTransclusion,m=t.builders.ngModelOptions,c=t.builders.ngModel,d=t.builders.sfField,u=t.builders.condition;t.builders.array;r.prependRule("object",n),r.prependRule("someOfFieldset",l),o.defineAddOn("bootstrapDecorator","someof-fieldset","decorators/bootstrap/someof.html",[d,c,m,f]),e.each(i,function(e,t){r.prependRule(t,a),o.defineAddOn("bootstrapDecorator",e+"-selector","decorators/bootstrap/someof-selector.html",[d,c,m,u])})}]),angular.module("schemaForm").directive("sfSomeOf",function(){return{scope:!0,controller:["$attrs","$parse","$scope",function(e,o,r){var t=o(e.sfSomeOf);return{getModel:function(){return t(r)},getKey:function(){return r.form.key}}}]}}),angular.module("schemaForm").directive("sfSomeOfSelector",["sfValidator",function(o){return{require:["^sf-some-of","ngModel"],scope:!1,link:function(r,t,s,l){var a=l[0],n=l[1],i=a.getModel(),f=e.find(r.form.forms,function(r){var t=e.extend({key:a.getKey()},r);return o.validate(t,i).valid});f&&(n.$setViewValue(f.title||f.name),n.$setPristine(),n.$setUntouched())}}}]),t});